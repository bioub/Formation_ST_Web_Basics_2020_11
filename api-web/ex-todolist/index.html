<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <form class="todo-form">
    <input type="checkbox" class="todo-toggle-all">
    <input type="text" class="todo-new-input">
    <button>+</button>
  </form>
  <div class="todo-container">
    <!--
      <div class="todo-row">
        <input type="checkbox" class="todo-completed">
        <span class="todo-title">Acheter du pain</span>
        <button class="todo-btn-remove">-</button>
      </div>
    -->
  </div>
  <script>
    /** @type {HTMLFormElement} */
    const todoFormEl = document.querySelector('.todo-form');
    /** @type {HTMLInputElement} */
    const todoNewInputEl = document.querySelector('.todo-new-input');
    /** @type {HTMLDivElement} */
    const todoContainerEl = document.querySelector('.todo-container');

    /**
     * @param {object} todo
     * @param {number} todo.id
     * @param {string} todo.title
     * @param {boolean} todo.completed
     * @param {HTMLElement} parentEl
     */
    function addTodo(todo, parentEl) {
      const rowEl = document.createElement('div');
      rowEl.className = 'todo-row';

      // Exercice 1 :
      // Ajouter la checkbox comme dans l'exemple ci dessous
      // <div class="todo-row">
      //   <input type="checkbox" class="todo-completed">
      //   <span class="todo-title">Acheter du pain</span>
      //   <button class="todo-btn-remove">-</button>
      // </div>

      const spanEl = document.createElement('span');
      spanEl.className = 'todo-title';
      spanEl.innerText = todo.title;
      rowEl.appendChild(spanEl);

      // Exercice 4 :
      // Sur l'événement dblclick du span
      // le transformer en balise input
      // Sur l'événement blur de cette balise input
      // la transformer en balise span
      // Comme sur cette démo : http://todomvc.com/examples/backbone/

      // Exercice 2 :
      // Ajouter le bouton moins comme dans l'exemple ci dessous
      // <div class="todo-row">
      //   <input type="checkbox" class="todo-completed">
      //   <span class="todo-title">Acheter du pain</span>
      //   <button class="todo-btn-remove">-</button>
      // </div>
      // au clic de ce bouton, supprimer la ligne
      // (historique) Node.prototype.removeChild : https://developer.mozilla.org/en-US/docs/Web/API/Node/removeChild
      // (récent mais pas IE) ChildNode.prototype.remove : https://developer.mozilla.org/fr/docs/Web/API/ChildNode/remove

      if (parentEl.childElementCount) {
        parentEl.insertBefore(rowEl, parentEl.firstElementChild);
      } else {
        parentEl.appendChild(rowEl);
      }
    }

    todoFormEl.addEventListener('submit', (event) => {
      // empèche le navigateur de réalisation son action par défaut
      event.preventDefault();

      addTodo({
        id: Math.floor(Math.random() * 1000),
        title: todoNewInputEl.value,
        completed: false,
      }, todoContainerEl);
    });

    // Exercice 3 :
    // Ecouter le click de la balise <input type="checkbox" class="todo-toggle-all">
    // Cocher ou décocher toutes les checkboxes des todos
    // (les balise <input type="checkbox" class="todo-completed">)
    // inputEl.checked = true; pour cocher
    // document.querySelectorAll() pour sélectionner plusieurs éléments
  </script>
</body>
</html>
